<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>回音的博客</title>
  
  
  <link href="https://echo.moe/atom.xml" rel="self"/>
  
  <link href="https://echo.moe/"/>
  <updated>2022-04-09T08:39:29.076Z</updated>
  <id>https://echo.moe/</id>
  
  <author>
    <name>Wordless Echo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Android上使用OTC、可变字体、标点挤压和特别修改</title>
    <link href="https://echo.moe/otc-vf-chws-and-specifi-config-for-android/"/>
    <id>https://echo.moe/otc-vf-chws-and-specifi-config-for-android/</id>
    <published>2021-12-27T15:04:40.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<p>Android上使用字体使用OTC和可变字体时需要修改fonts.xml，而Noto CJK需要删除一些cmap条目。</p><span id="more"></span><h2 id="依赖">依赖</h2><p>安装Python和<a href="https://pypa.github.io/pipx/installation/">pipx</a>。</p><h2 id="Android对Noto-CJK的修改">Android对Noto CJK的修改</h2><p>详情可见此<a href="https://android.googlesource.com/platform/external/noto-fonts/+/refs/heads/master/cjk/README.android">README.android</a>。</p><p>安装<a href="https://github.com/googlefonts/nototools">nototools</a>：</p><pre><code class="highlight sh">pipx install notofonttools</code></pre><p>从AOSP下载<a href="https://android.googlesource.com/platform/external/noto-fonts/+/refs/heads/master/cjk/subset_noto_cjk.py">subset_noto_cjk.py</a>（<a href="https://github.com/google/gitiles/issues/106#issuecomment-462030196">Download raw file · Issue #106 · google/gitiles</a>）：</p><pre><code class="highlight sh">curl <span class="string">&quot;https://android.googlesource.com/platform/external/noto-fonts/+/refs/heads/master/cjk/subset_noto_cjk.py?format=TEXT&quot;</span> | <span class="built_in">base64</span> --decode &gt; subset_noto_cjk.py</code></pre><p>将<code>subset_noto_cjk.py</code>中的这行：</p><pre><code class="highlight python">TTC_NAMES = (<span class="string">&#x27;NotoSansCJK-Regular.ttc&#x27;</span>, <span class="string">&#x27;NotoSerifCJK-Regular.ttc&#x27;</span>)</code></pre><p>修改为：</p><pre><code class="highlight python">TTC_NAMES = (<span class="string">&#x27;NotoSansCJK-VF.otf.ttc&#x27;</span>, )</code></pre><p><strong>注意，只有一个字体时，不要把末尾的逗号去掉。</strong></p><p>执行：</p><pre><code class="highlight sh"><span class="comment"># notofonttools虚拟环境</span><span class="built_in">source</span> ~/.local/pipx/venvs/notofonttools/bin/activatepython3 ./subset_noto_cjk.py<span class="comment"># 退出虚拟环境</span>deactivate</code></pre><p>这个脚本会去掉一些cmap，避免<a href="https://github.com/simonsmh/notocjk/issues/21">Emoji显示的问题</a>。输出的字体在当前文件夹的subsetted文件夹下。</p><h2 id="标点挤压（Contextual-Spacing）">标点挤压（Contextual Spacing）</h2><p>详情可见此<a href="https://android.googlesource.com/platform/external/noto-fonts/+/refs/heads/master/cjk/README.android">README.android</a>，但早期版本的Android实际上并没有使用过这个工具。</p><p>安装<a href="https://github.com/kojiishi/east_asian_spacing">East Asian Contextual Spacing</a>：</p><pre><code class="highlight sh">pipx install east-asian-spacing</code></pre><p>执行：</p><pre><code class="highlight sh">east-asian-spacing -o build subsetted/NotoSansCJK-VF.otf.ttc</code></pre><p><code>-o build</code>参数代表字体输出在当前文件夹的build文件夹下。</p><h2 id="OTC-Index">OTC Index</h2><p>安装<a href="https://github.com/adobe-type-tools/afdko">afdko</a>：</p><pre><code class="highlight sh">pipx install afdko</code></pre><p>然后执行：</p><pre><code class="highlight sh">otc2otf -r NotoSansCJK-VF.otf.ttc | grep FontFont 0: NotoSansCJKjp-Thin.otfFont 1: NotoSansCJKkr-Thin.otfFont 2: NotoSansCJKsc-Thin.otfFont 3: NotoSansCJKtc-Thin.otfFont 4: NotoSansCJKhk-Thin.otf</code></pre><p>这里的数字与TTC index一一对应，如简体中文为2，fonts.xml中zh-Hans的index就为2：</p><pre><code class="highlight xml"><span class="tag">&lt;<span class="name">family</span> <span class="attr">lang</span>=<span class="string">&quot;zh-Hans&quot;</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;100&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSansCJKjp-Thin&quot;</span>&gt;</span>NotoSansCJK-VF.otf.ttc    <span class="comment">&lt;!-- ... --&gt;</span></code></pre><h2 id="可变字体">可变字体</h2><p>安装<a href="https://github.com/fonttools/fonttools">fonttools</a>：</p><pre><code class="highlight plaintext">pipx install fonttools</code></pre><p>执行：</p><pre><code class="highlight sh"><span class="comment"># -y 代表OTC index</span>ttx -y 2 -t fvar NotoSansCJK-VF.otf.ttc</code></pre><p>输出内容：</p><pre><code class="highlight xml">cat NotoSansCJK-VF.otf.ttx<span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><span class="tag">&lt;<span class="name">ttFont</span> <span class="attr">sfntVersion</span>=<span class="string">&quot;OTTO&quot;</span> <span class="attr">ttLibVersion</span>=<span class="string">&quot;4.28&quot;</span>&gt;</span>  <span class="tag">&lt;<span class="name">fvar</span>&gt;</span>    <span class="comment">&lt;!-- Weight --&gt;</span>    <span class="tag">&lt;<span class="name">Axis</span>&gt;</span>      <span class="tag">&lt;<span class="name">AxisTag</span>&gt;</span>wght<span class="tag">&lt;/<span class="name">AxisTag</span>&gt;</span>      <span class="tag">&lt;<span class="name">Flags</span>&gt;</span>0x0<span class="tag">&lt;/<span class="name">Flags</span>&gt;</span>      <span class="tag">&lt;<span class="name">MinValue</span>&gt;</span>100.0<span class="tag">&lt;/<span class="name">MinValue</span>&gt;</span>      <span class="tag">&lt;<span class="name">DefaultValue</span>&gt;</span>100.0<span class="tag">&lt;/<span class="name">DefaultValue</span>&gt;</span>      <span class="tag">&lt;<span class="name">MaxValue</span>&gt;</span>900.0<span class="tag">&lt;/<span class="name">MaxValue</span>&gt;</span>      <span class="tag">&lt;<span class="name">AxisNameID</span>&gt;</span>265<span class="tag">&lt;/<span class="name">AxisNameID</span>&gt;</span>    <span class="tag">&lt;/<span class="name">Axis</span>&gt;</span>    <span class="comment">&lt;!-- Thin --&gt;</span>    <span class="comment">&lt;!-- PostScript: NotoSansCJKsc-Thin --&gt;</span>    <span class="tag">&lt;<span class="name">NamedInstance</span> <span class="attr">flags</span>=<span class="string">&quot;0x0&quot;</span> <span class="attr">postscriptNameID</span>=<span class="string">&quot;267&quot;</span> <span class="attr">subfamilyNameID</span>=<span class="string">&quot;266&quot;</span>&gt;</span>      <span class="tag">&lt;<span class="name">coord</span> <span class="attr">axis</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100.0&quot;</span>/&gt;</span>    <span class="tag">&lt;/<span class="name">NamedInstance</span>&gt;</span>    <span class="comment">&lt;!-- Light --&gt;</span>    <span class="comment">&lt;!-- PostScript: NotoSansCJKsc-Light --&gt;</span>    <span class="tag">&lt;<span class="name">NamedInstance</span> <span class="attr">flags</span>=<span class="string">&quot;0x0&quot;</span> <span class="attr">postscriptNameID</span>=<span class="string">&quot;269&quot;</span> <span class="attr">subfamilyNameID</span>=<span class="string">&quot;268&quot;</span>&gt;</span>      <span class="tag">&lt;<span class="name">coord</span> <span class="attr">axis</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">value</span>=<span class="string">&quot;300.0&quot;</span>/&gt;</span>    <span class="tag">&lt;/<span class="name">NamedInstance</span>&gt;</span>    <span class="comment">&lt;!-- DemiLight --&gt;</span>    <span class="comment">&lt;!-- PostScript: NotoSansCJKsc-DemiLight --&gt;</span>    <span class="tag">&lt;<span class="name">NamedInstance</span> <span class="attr">flags</span>=<span class="string">&quot;0x0&quot;</span> <span class="attr">postscriptNameID</span>=<span class="string">&quot;271&quot;</span> <span class="attr">subfamilyNameID</span>=<span class="string">&quot;270&quot;</span>&gt;</span>      <span class="tag">&lt;<span class="name">coord</span> <span class="attr">axis</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">value</span>=<span class="string">&quot;350.0&quot;</span>/&gt;</span>    <span class="tag">&lt;/<span class="name">NamedInstance</span>&gt;</span>    <span class="comment">&lt;!-- Regular --&gt;</span>    <span class="comment">&lt;!-- PostScript: NotoSansCJKsc-Regular --&gt;</span>    <span class="tag">&lt;<span class="name">NamedInstance</span> <span class="attr">flags</span>=<span class="string">&quot;0x0&quot;</span> <span class="attr">postscriptNameID</span>=<span class="string">&quot;273&quot;</span> <span class="attr">subfamilyNameID</span>=<span class="string">&quot;272&quot;</span>&gt;</span>      <span class="tag">&lt;<span class="name">coord</span> <span class="attr">axis</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">value</span>=<span class="string">&quot;400.0&quot;</span>/&gt;</span>    <span class="tag">&lt;/<span class="name">NamedInstance</span>&gt;</span>    <span class="comment">&lt;!-- Medium --&gt;</span>    <span class="comment">&lt;!-- PostScript: NotoSansCJKsc-Medium --&gt;</span>    <span class="tag">&lt;<span class="name">NamedInstance</span> <span class="attr">flags</span>=<span class="string">&quot;0x0&quot;</span> <span class="attr">postscriptNameID</span>=<span class="string">&quot;275&quot;</span> <span class="attr">subfamilyNameID</span>=<span class="string">&quot;274&quot;</span>&gt;</span>      <span class="tag">&lt;<span class="name">coord</span> <span class="attr">axis</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">value</span>=<span class="string">&quot;500.0&quot;</span>/&gt;</span>    <span class="tag">&lt;/<span class="name">NamedInstance</span>&gt;</span>    <span class="comment">&lt;!-- Bold --&gt;</span>    <span class="comment">&lt;!-- PostScript: NotoSansCJKsc-Bold --&gt;</span>    <span class="tag">&lt;<span class="name">NamedInstance</span> <span class="attr">flags</span>=<span class="string">&quot;0x0&quot;</span> <span class="attr">postscriptNameID</span>=<span class="string">&quot;277&quot;</span> <span class="attr">subfamilyNameID</span>=<span class="string">&quot;276&quot;</span>&gt;</span>      <span class="tag">&lt;<span class="name">coord</span> <span class="attr">axis</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">value</span>=<span class="string">&quot;700.0&quot;</span>/&gt;</span>    <span class="tag">&lt;/<span class="name">NamedInstance</span>&gt;</span>    <span class="comment">&lt;!-- Black --&gt;</span>    <span class="comment">&lt;!-- PostScript: NotoSansCJKsc-Black --&gt;</span>    <span class="tag">&lt;<span class="name">NamedInstance</span> <span class="attr">flags</span>=<span class="string">&quot;0x0&quot;</span> <span class="attr">postscriptNameID</span>=<span class="string">&quot;279&quot;</span> <span class="attr">subfamilyNameID</span>=<span class="string">&quot;278&quot;</span>&gt;</span>      <span class="tag">&lt;<span class="name">coord</span> <span class="attr">axis</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">value</span>=<span class="string">&quot;900.0&quot;</span>/&gt;</span>    <span class="tag">&lt;/<span class="name">NamedInstance</span>&gt;</span>  <span class="tag">&lt;/<span class="name">fvar</span>&gt;</span><span class="tag">&lt;/<span class="name">ttFont</span>&gt;</span></code></pre><p>找出Noto Sans CJK各字重的weight值：</p><pre><code class="highlight xml"># afdko，见上文OTC indexotc2otf -r NotoSansCJK.ttc | grep jpFont 0: NotoSansCJKjp-Thin.otfFont 5: NotoSansCJKjp-Light.otfFont 10: NotoSansCJKjp-DemiLight.otfFont 15: NotoSansCJKjp-Medium.otfFont 20: NotoSansCJKjp-Black.otfFont 25: NotoSansCJKjp-Regular.otfFont 30: NotoSansMonoCJKjp-Regular.otfFont 35: NotoSansCJKjp-Bold.otfFont 40: NotoSansMonoCJKjp-Bold.otfttx -y 0 -t OS/2 NotoSansCJK.ttc<span class="tag">&lt;<span class="name">usWeightClass</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span>ttx -y 5 -t OS/2 NotoSansCJK.ttc<span class="tag">&lt;<span class="name">usWeightClass</span> <span class="attr">value</span>=<span class="string">&quot;300&quot;</span>/&gt;</span>ttx -y 10 -t OS/2 NotoSansCJK.ttc<span class="tag">&lt;<span class="name">usWeightClass</span> <span class="attr">value</span>=<span class="string">&quot;350&quot;</span>/&gt;</span>ttx -y 25 -t OS/2 NotoSansCJK.ttc<span class="tag">&lt;<span class="name">usWeightClass</span> <span class="attr">value</span>=<span class="string">&quot;400&quot;</span>/&gt;</span>ttx -y 15 -t OS/2 NotoSansCJK.ttc<span class="tag">&lt;<span class="name">usWeightClass</span> <span class="attr">value</span>=<span class="string">&quot;500&quot;</span>/&gt;</span>ttx -y 35 -t OS/2 NotoSansCJK.ttc<span class="tag">&lt;<span class="name">usWeightClass</span> <span class="attr">value</span>=<span class="string">&quot;700&quot;</span>/&gt;</span>ttx -y 20 -t OS/2 NotoSansCJK.ttc<span class="tag">&lt;<span class="name">usWeightClass</span> <span class="attr">value</span>=<span class="string">&quot;900&quot;</span>/&gt;</span></code></pre><pre><code class="highlight xml"><span class="tag">&lt;<span class="name">family</span> <span class="attr">lang</span>=<span class="string">&quot;zh-Hans&quot;</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;100&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSansCJKjp-Thin&quot;</span>&gt;</span>NotoSansCJK-VF.otf.ttc        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSansCJKjp-Thin&quot;</span>&gt;</span>NotoSansCJK-VF.otf.ttc        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;300.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;350&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSansCJKjp-Thin&quot;</span>&gt;</span>NotoSansCJK-VF.otf.ttc        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;350.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;400&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSansCJKjp-Thin&quot;</span>&gt;</span>NotoSansCJK-VF.otf.ttc        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;400.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;500&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSansCJKjp-Thin&quot;</span>&gt;</span>NotoSansCJK-VF.otf.ttc        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;500.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;700&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSansCJKjp-Thin&quot;</span>&gt;</span>NotoSansCJK-VF.otf.ttc        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;700.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;900&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">index</span>=<span class="string">&quot;2&quot;</span> <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSansCJKjp-Thin&quot;</span>&gt;</span>NotoSansCJK-VF.otf.ttc        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;900.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="comment">&lt;!-- ... --&gt;</span><span class="tag">&lt;/<span class="name">family</span>&gt;</span></code></pre><p>我记录下来的<a href="https://github.com/WordlessEcho/Noto-Super-OTC-Magisk#sans-serif">Noto Sans CJK和Noto Serif CJK字重数值表</a></p><h2 id="测试">测试</h2><p>此处安利本人写的<a href="https://github.com/WordlessEcho/Variable-Font-Test">可变字体测试</a>。<br><img src="https://github.com/WordlessEcho/Variable-Font-Test/raw/main/doc/pics/variable-font-test-zh-tw.gif" alt="variable-font-test-zh-tw"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Android上使用字体使用OTC和可变字体时需要修改fonts.xml，而Noto CJK需要删除一些cmap条目。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Using Built-in Variable Font on Android</title>
    <link href="https://echo.moe/using-built-in-variable-font-on-android/"/>
    <id>https://echo.moe/using-built-in-variable-font-on-android/</id>
    <published>2021-11-08T08:05:11.000Z</published>
    <updated>2022-04-09T08:39:29.080Z</updated>
    
    <content type="html"><![CDATA[<p>You can use variable font for <strong>some writing system</strong> after Android Oreo.</p><span id="more"></span><p>In Android Oreo, it is the first time that Android support variable font. And Android add <code>NotoSansKhmer-VF.ttf</code> for Khmer language.</p><p><a href="https://cs.android.com/android/platform/superproject/+/android-8.0.0_r1:frameworks/base/data/fonts/fonts.xml;l=214">Line 214 in fonts.xml of Android Oreo</a></p><pre><code class="highlight xml"><span class="comment">&lt;!-- ... --&gt;</span><span class="tag">&lt;<span class="name">family</span> <span class="attr">lang</span>=<span class="string">&quot;und-Khmr&quot;</span> <span class="attr">variant</span>=<span class="string">&quot;elegant&quot;</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;100&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;26.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;200&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;39.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;58.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;400&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;90.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;500&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;108.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;600&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;128.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;700&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;151.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;800&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;169.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;900&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;190.0&quot;</span> /&gt;</span>    <span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">family</span>&gt;</span><span class="comment">&lt;!-- ... --&gt;</span></code></pre><p>Android will use different font in different language automatically. You can directly set <a href="https://developer.android.com/reference/android/widget/TextView#attr_android:fontVariationSettings">fontVariationSettings</a> for Khmer language.</p><h1>How to use variable font?</h1><p>In this example, we set width to 25, and weight to 32.</p><pre><code class="highlight xml"><span class="tag">&lt;<span class="name">EditText</span></span><span class="tag">    &lt;!<span class="attr">--</span> <span class="attr">...</span> <span class="attr">--</span>&gt;</span>    <span class="comment">&lt;!-- Khmer language as example --&gt;</span>    android:text=&quot;ភាសាខ្មែរ&quot;    android:fontVariationSettings=&quot;&#x27;wdth&#x27; 25, &#x27;wght&#x27; 32&quot; /&gt;</code></pre><p>You should follow the syntax in <a href="https://developer.android.com/reference/android/widget/TextView#setFontFeatureSettings(java.lang.String)">Android document</a> to <code>fontVariationSettings</code>.</p><p>…and check OpenType document to learn more about axis tags:</p><ul><li><a href="https://docs.microsoft.com/en-us/typography/opentype/spec/otvaroverview">OpenType Font Variations overview (OpenType 1.8.4) - Typography | Microsoft Docs</a></li><li><a href="https://docs.microsoft.com/en-us/typography/opentype/spec/dvaraxisreg">OpenType Design-Variation Axis Tag Registry (OpenType 1.8.4) - Typography | Microsoft Docs</a></li></ul><h1>Which language have built-in variable font?</h1><p>You can directly check <a href="https://cs.android.com/android/platform/superproject/+/master:frameworks/base/data/fonts/fonts.xml">fonts.xml</a>. Switch branch for different version of Android. Search <code>axis</code>(tags in fonts.xml for variable font) in <code>fonts.xml</code>.</p><p>For example, this is a serif (<code>fallbackFor=&quot;serif&quot;</code>) font of Armenian (<code>lang=&quot;und-Armn&quot;</code>) that support variable. At regular weight (<code>weight=&quot;400&quot;</code>) Android will set its ‘wght’ to 400.</p><pre><code class="highlight xml"><span class="tag">&lt;<span class="name">family</span> <span class="attr">lang</span>=<span class="string">&quot;und-Armn&quot;</span>&gt;</span>  <span class="comment">&lt;!-- ... --&gt;</span>  <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;400&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">fallbackFor</span>=<span class="string">&quot;serif&quot;</span></span><span class="tag">        <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSerifEthiopic-Regular&quot;</span>&gt;</span>NotoSerifEthiopic-VF.ttf      <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;400&quot;</span>/&gt;</span>  <span class="tag">&lt;/<span class="name">font</span>&gt;</span>  <span class="comment">&lt;!-- ... --&gt;</span><span class="tag">&lt;/<span class="name">family</span>&gt;</span></code></pre><h2 id="For-English">For English</h2><p>Android add variable version of Roboto (default font of English) since Android 12. But for some reason, they use static version in regular weight.</p><pre><code class="highlight xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;400&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>RobotoStatic-Regular.ttf<span class="tag">&lt;/<span class="name">font</span>&gt;</span></code></pre><p>You can set <code>textStyle</code> to bold (or any other you want) to use variable version of Roboto. Then you can set any “text style” you like (<code>&quot;'wght' 400&quot;</code> for regular if you wish) by <code>fontVariationSettings</code>.</p><pre><code class="highlight xml"><span class="tag">&lt;<span class="name">EditText</span></span><span class="tag">    &lt;!<span class="attr">--</span> <span class="attr">...</span> <span class="attr">--</span>&gt;</span>    android:text=&quot;A quick brown fox jumps over a lazy dog&quot;    <span class="comment">&lt;!-- or any text style you want --&gt;</span>    android:textStyle=&quot;bold&quot;    android:fontVariationSettings=&quot;&#x27;ital&#x27; 0.5, &#x27;wdth&#x27; 85.5, &#x27;wght&#x27; 450&quot; /&gt;</code></pre><h2 id="For-CJK-Chinese-Japanese-and-Korean">For CJK (Chinese, Japanese and Korean)</h2><p>Unfortunately, Android doesn’t include variable Noto CJK yet. There is a <a href="https://issuetracker.google.com/issues/186033995">issue</a> to request Google add variable version of Noto CJK into Android. Please <strong>star it</strong> to support the request.</p><h1>My app</h1><p>I wrote a app that use Android API to set variation. And it allows user to import own fonts to try.</p><p><img src="https://github.com/WordlessEcho/Variable-Font-Test/raw/main/doc/pics/variable-font-test-en.gif" alt="App Preview en"></p><p><a href="https://github.com/WordlessEcho/Variable-Font-Test">WordlessEcho/Variable-Font-Test: A simple app to test variable font in system.</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;You can use variable font for &lt;strong&gt;some writing system&lt;/strong&gt; after Android Oreo.&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Privacy Policy of Variable Font Test</title>
    <link href="https://echo.moe/privacy-policy-of-variable-font-test/"/>
    <id>https://echo.moe/privacy-policy-of-variable-font-test/</id>
    <published>2021-11-07T15:15:36.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<h1>Privacy Policy</h1><p><strong>Wordless Echo</strong> built the Variable Font Test app as an <strong>Free and Open Source</strong> app. This SERVICE is provided by <strong>Wordless Echo</strong> at no cost and is intended for use as is.</p><p>This page is used to inform visitors regarding my policies with the collection, use, and disclosure of <strong>Personal Information</strong> if anyone decided to use my <strong>Service</strong>.</p><p>If you choose to use my <strong>Service</strong>, then you agree to the collection and use of information in relation to this policy. The <strong>Personal Information</strong> that I collect is used for providing and improving the <strong>Service</strong>. I will not use or share your information with anyone except as described in this <strong>Privacy Policy</strong>.</p><p>The terms used in this <strong>Privacy Policy</strong> have the same meanings as in our <strong>Terms and Conditions</strong>, which is accessible at <strong>Variable Font Test</strong> unless otherwise defined in this <strong>Privacy Policy</strong>.</p><h2 id="Information-Collection-and-Use">Information Collection and Use</h2><p>For a better experience, while using our Service, I may require you to provide us with certain personally identifiable information. The information that I request will be retained on your device and is not collected by me in any way.</p><h2 id="Log-Data">Log Data</h2><p>I want to inform you that whenever you use my <strong>Service</strong>, in a case of an error in the app I collect data and information (through third party products) on your phone called <strong>Log Data</strong>. This <strong>Log Data</strong> may include information such as your device <strong>Internet Protocol</strong> (“IP”) address, device name, operating system version, the configuration of the app when utilizing my Service, the time and date of your use of the Service, and other statistics.</p><h2 id="Cookies">Cookies</h2><p>Cookies are files with a small amount of data that are commonly used as anonymous unique identifiers. These are sent to your browser from the websites that you visit and are stored on your device’s internal memory.</p><p>This Service does not use these “cookies” explicitly. However, the app may use third party code and libraries that use “cookies” to collect information and improve their services. You have the option to either accept or refuse these cookies and know when a cookie is being sent to your device. If you choose to refuse our cookies, you may not be able to use some portions of this <strong>Service</strong>.</p><h2 id="Service-Providers">Service Providers</h2><p>I may employ third-party companies and individuals due to the following reasons:</p><ul><li>To facilitate our <strong>Service</strong>;</li><li>To provide the <strong>Service</strong> on our behalf;</li><li>To perform <strong>Service-related</strong> services; or</li><li>To assist us in analyzing how our <strong>Service</strong> is used.</li></ul><p>I want to inform users of this <strong>Service</strong> that these third parties have access to your <strong>Personal Information</strong>. The reason is to perform the tasks assigned to them on our behalf. However, they are obligated not to disclose or use the information for any other purpose.</p><p><strong>Security</strong></p><p>I value your trust in providing us your <strong>Personal Information</strong>, thus we are striving to use commercially acceptable means of protecting it. But remember that no method of transmission over the internet, or method of electronic storage is 100% secure and reliable, and I cannot guarantee its absolute security.</p><p><strong>Links to Other Sites</strong></p><p>This <strong>Service</strong> may contain links to other sites. If you click on a third-party link, you will be directed to that site. Note that these external sites are not operated by me. Therefore, I strongly advise you to review the <strong>Privacy Policy</strong> of these websites. I have no control over and assume no responsibility for the content, privacy policies, or practices of any third-party sites or services.</p><p><strong>Children’s Privacy</strong></p><p>These <strong>Services</strong> do not address anyone under the age of 13. I do not knowingly collect personally identifiable information from children under 13 years of age. In the case I discover that a child under 13 has provided me with personal information, I immediately delete this from our servers. If you are a parent or guardian and you are aware that your child has provided us with personal information, please contact me so that I will be able to do necessary actions.</p><p><strong>Changes to This Privacy Policy</strong></p><p>I may update our <strong>Privacy Policy</strong> from time to time. Thus, you are advised to review this page periodically for any changes. I will notify you of any changes by posting the new <strong>Privacy Policy</strong> on this page.</p><p>This policy is effective as of 2021-11-07</p><p><strong>Contact Us</strong></p><p>If you have any questions or suggestions about my <strong>Privacy Policy</strong>, do not hesitate to contact me at <a href="mailto:wordless@echo.moe">wordless@echo.moe</a>.</p><p>This privacy policy page was created at <a href="https://privacypolicytemplate.net">privacypolicytemplate.net</a> and modified/generated by <a href="https://app-privacy-policy-generator.nisrulz.com/">App Privacy Policy Generator</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;Privacy Policy&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Wordless Echo&lt;/strong&gt; built the Variable Font Test app as an &lt;strong&gt;Free and Open Source&lt;/strong&gt; app. </summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Dynamic Display Dividers on Scrollable Dialog of Material UI</title>
    <link href="https://echo.moe/dynamic-dividers-on-dialog/"/>
    <id>https://echo.moe/dynamic-dividers-on-dialog/</id>
    <published>2021-06-22T00:48:19.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<p>Hide top divider while scrolling to the top, hide bottom divider while scrolling to the end.</p><span id="more"></span><p>首发于<a href="https://github.com/mui-org/material-ui/issues/3155#issuecomment-863226215">[Dialog] Add Divider to Dialog · Issue #3155 · mui-org/material-ui · GitHub</a>，故用英文行文。</p><h3 id="Example">Example</h3><p>Here is an example on <a href="https://codesandbox.io/s/dialog-with-dynamic-dividers-j1ucw">CodeSandbox</a>.</p><p><img src="https://user-images.githubusercontent.com/12007025/122402749-5c05a680-cfb0-11eb-8f16-1cfb910c44ed.gif" alt="dialog-example"></p><h3 id="Details">Details</h3><p>Create two variables to control dividers.</p><pre><code class="highlight tsx"><span class="keyword">const</span> [topDivider, setTopDivider] = <span class="title function_">useState</span>(<span class="literal">false</span>);<span class="keyword">const</span> [bottomDivider, setBottomDivider] = <span class="title function_">useState</span>(<span class="literal">false</span>);</code></pre><p>Create a function to initilize status of dividers. Because <code>Dialog</code> have its own “lifecycle”. (You will see the explanation below)</p><pre><code class="highlight tsx"><span class="keyword">const</span> <span class="title function_">initializeDividers</span> = (<span class="params"></span>) =&gt; &#123;  <span class="title function_">setTopDivider</span>(<span class="literal">false</span>);  <span class="title function_">setBottomDivider</span>(<span class="literal">false</span>);  <span class="comment">/* ... */</span>&#125;;</code></pre><p>Detect if scrollbar exist by comparing <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollHeight"><code>scrollHeight</code></a> with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight"><code>clientHeight</code></a>.<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p>The id in <code>getElementById</code> is for <code>DialogContent</code>.</p><pre><code class="highlight tsx"><span class="keyword">const</span> <span class="title function_">initializeDividers</span> = (<span class="params"></span>) =&gt; &#123;  <span class="comment">/* ... */</span>  <span class="keyword">const</span> dialogContent = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;dialog-content&#x27;</span>);  <span class="keyword">if</span> (dialogContent !== <span class="literal">null</span>) &#123;    <span class="keyword">if</span> (dialogContent.<span class="property">scrollHeight</span> &gt; dialogContent.<span class="property">clientHeight</span>) &#123;      <span class="title function_">setBottomDivider</span>(<span class="literal">true</span>);    &#125;  &#125;&#125;;</code></pre><p>Adding <code>initializeDividers</code> to <code>Dialog</code> in <a href="https://mui.com/guides/migration-v4/#dialog"><code>onEnter of TransitionProps</code></a>. Because display of <code>Dialog</code> is control by <code>open</code>. (Now you know why we don’t use Effect Hook) You will get <code>null</code> if you are using React Effect Hook to get element.</p><pre><code class="highlight tsx">&lt;<span class="title class_">Dialog</span>  open=&#123;<span class="comment">/* variable from caller */</span>&#125;  <span class="title class_">TransitionProps</span>=&#123;&#123;    <span class="attr">onEnter</span>: initializeDividers,  &#125;&#125;  scroll=<span class="string">&quot;paper&quot;</span>&gt;&#123;<span class="comment">/* ... */</span>&#125;</code></pre><p>Add <code>Divider</code>s before &amp; after <code>DialogContent</code> with its variable from State Hook. And don’t forget to set a id for <code>DialogContent</code>.</p><pre><code class="highlight tsx">&#123;topDivider ? <span class="language-xml"><span class="tag">&lt;<span class="name">Divider</span> /&gt;</span></span> : <span class="literal">null</span>&#125;&lt;<span class="title class_">DialogContent</span> id=<span class="string">&quot;dialog-content&quot;</span>&gt;  &#123;<span class="comment">/* ... */</span>&#125;&lt;/<span class="title class_">DialogContent</span>&gt;&#123;bottomDivider ? <span class="language-xml"><span class="tag">&lt;<span class="name">Divider</span> /&gt;</span></span> : <span class="literal">null</span>&#125;</code></pre><p>Now let’s handle the scrolling.</p><p>You need to listen the <code>onScroll</code> event in <code>DialogContent</code>.</p><pre><code class="highlight tsx"><span class="keyword">const</span> <span class="title function_">handleScrolling</span> = (<span class="params">e: React.UIEvent&lt;HTMLDivElement&gt;</span>) =&gt; &#123;  <span class="comment">/* ... */</span>&#125;;<span class="comment">/* ... */</span><span class="language-xml"><span class="tag">&lt;<span class="name">DialogContent</span> <span class="attr">id</span>=<span class="string">&quot;dialog-content&quot;</span> <span class="attr">onScroll</span>=<span class="string">&#123;handleScrolling&#125;</span>&gt;</span></span><span class="language-xml">  &#123;/* ... */&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">DialogContent</span>&gt;</span></span></code></pre><p>Assert the type of <code>event.target</code> to <code>HTMLDivElement</code>.<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><pre><code class="highlight tsx"><span class="keyword">const</span> <span class="title function_">handleScrolling</span> = (<span class="params">e: React.UIEvent&lt;HTMLDivElement&gt;</span>) =&gt; &#123;  <span class="keyword">if</span> (e === <span class="literal">undefined</span>) &#123;    <span class="keyword">return</span>;  &#125;  <span class="keyword">const</span> &#123; scrollTop, scrollHeight, offsetHeight &#125; = e.<span class="property">currentTarget</span>;  <span class="comment">/* ... */</span>&#125;;</code></pre><p>Compare the <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollTop"><code>scrollTop</code></a> with the difference between <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollHeight"><code>scrollHeight</code></a> and <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollHeight"><code>scrollHeight</code></a>.<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> <sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></p><pre><code class="highlight tsx"><span class="keyword">const</span> <span class="title function_">handleScrolling</span> = (<span class="params">e: React.UIEvent&lt;HTMLDivElement&gt;</span>) =&gt; &#123;  <span class="comment">/* ... */</span>  <span class="title function_">setTopDivider</span>(scrollTop !== <span class="number">0</span>);  <span class="title function_">setBottomDivider</span>(    scrollTop !== scrollHeight - offsetHeight  );&#125;;</code></pre><h3 id="Updates">Updates</h3><ul><li>4/6/2022: Use <code>currentTarget</code> instead of <code>target</code>.</li></ul><h3 id="Credits-References">Credits &amp; References</h3><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://www.geeksforgeeks.org/check-whether-html-element-has-scrollbars-using-javascript/">Check whether HTML element has scrollbars using JavaScript - GeeksforGeeks</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://stackoverflow.com/a/56736905">reactjs - How to describe type scroll events? - Stack Overflow</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://stackoverflow.com/a/55262502">reactjs - is this possible to get scroll position in material-ui select list on Scroll? - Stack Overflow</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://stackoverflow.com/a/2481370">browser - How to get scrollbar position with Javascript? - Stack Overflow</a> <a href="#fnref4" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
    
    
    <summary type="html">&lt;p&gt;Hide top divider while scrolling to the top, hide bottom divider while scrolling to the end.&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>在C#中用反射简易实现ORM</title>
    <link href="https://echo.moe/simply-implement-orm-by-using-reflection-in-c-sharp/"/>
    <id>https://echo.moe/simply-implement-orm-by-using-reflection-in-c-sharp/</id>
    <published>2020-10-07T03:30:08.000Z</published>
    <updated>2022-04-09T08:39:29.080Z</updated>
    
    <content type="html"><![CDATA[<p>学习了一些面向对象的语言之后，总会想要实现一些高层次的抽象。这篇文章用反射实现了insert SQL的命令，简易实现了ORM。</p><span id="more"></span><h1>数据库</h1><p>作为示例，先新建一个company database，再新建一个包含name、age、telephone、address四列的employees table。</p><pre><code class="highlight SQL"><span class="keyword">CREATE</span> DATABASE company;USE company;<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employees (    id <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,    Name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,    Age <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,    Telephone <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,    Address <span class="type">VARCHAR</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,    <span class="keyword">PRIMARY</span> KEY (id));</code></pre><p>创建好以后的结构如下：</p><pre><code class="highlight SQL"><span class="keyword">SHOW</span> DATABASES;<span class="operator">+</span><span class="comment">--------------------+</span><span class="operator">|</span> Database           <span class="operator">|</span><span class="operator">+</span><span class="comment">--------------------+</span><span class="operator">|</span> company            <span class="operator">|</span><span class="operator">|</span>                    <span class="operator">|</span><span class="operator">|</span> <span class="operator">&lt;</span>...<span class="operator">&gt;</span>              <span class="operator">|</span><span class="operator">+</span><span class="comment">--------------------+</span>USE company;<span class="keyword">SHOW</span> TABLES;<span class="operator">+</span><span class="comment">-------------------+</span><span class="operator">|</span> Tables_in_company <span class="operator">|</span><span class="operator">+</span><span class="comment">-------------------+</span><span class="operator">|</span> employees         <span class="operator">|</span><span class="operator">+</span><span class="comment">-------------------+</span><span class="operator">+</span><span class="comment">----+---------------+-----+-------------+-----------+</span><span class="operator">|</span> id <span class="operator">|</span> Name          <span class="operator">|</span> Age <span class="operator">|</span> Telephone   <span class="operator">|</span> Address   <span class="operator">|</span><span class="operator">+</span><span class="comment">----+---------------+-----+-------------+-----------+</span></code></pre><h1>model</h1><p>新建一个model文件夹。按照上面创建的数据库，在model下创建一个employee类。</p><pre><code class="highlight csharp"><span class="keyword">namespace</span> &lt;<span class="title">ProjectName</span>&gt;.<span class="title">Model</span>&#123;    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Employee</span>    &#123;        <span class="comment">// set getter for GetProperties()</span>        <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; &#125;        <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; &#125;        <span class="keyword">public</span> <span class="built_in">string</span> Telephone &#123; <span class="keyword">get</span>; &#125;        <span class="keyword">public</span> <span class="built_in">string</span> Address &#123; <span class="keyword">get</span>; &#125;        <span class="function"><span class="keyword">public</span> <span class="title">Employee</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">int</span> age,</span></span><span class="params"><span class="function">            <span class="built_in">string</span> telephone, <span class="built_in">string</span> address</span>)</span>        &#123;            Name = name;            Age = age;            Telephone = telephone;            Address = address;        &#125;    &#125;&#125;</code></pre><p>注意，设定<code>getter</code>对于<code>GetProperties()</code>来说是必要的。</p><h1>数据库连接</h1><p>新建Dao文件夹，在Dao下新建一个使用单例模式<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>的CompanyDb类，用于连接到数据库。</p><pre><code class="highlight csharp"><span class="keyword">namespace</span> &lt;<span class="title">ProjectName</span>&gt;.<span class="title">Dao</span>&#123;    <span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title">CompanyDb</span>    &#123;        <span class="keyword">public</span> <span class="keyword">static</span> MySqlConnection Connection &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> Nested.Connection; &#125; &#125;        <span class="function"><span class="keyword">private</span> <span class="title">CompanyDb</span>()</span> &#123; &#125;        <span class="keyword">private</span> <span class="keyword">class</span> <span class="title">Nested</span>        &#123;            <span class="function"><span class="keyword">static</span> <span class="title">Nested</span>()</span> &#123; &#125;            <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keyword">readonly</span> MySqlConnection Connection = <span class="keyword">new</span>                MySqlConnection(<span class="string">$&quot;server = localhost; User ID = &quot;</span> +                <span class="string">$&quot;<span class="subst">&#123;&lt;username&gt;&#125;</span>; Password = <span class="subst">&#123;&lt;Password&gt;&#125;</span>; DataBase = &quot;</span> +                <span class="string">&quot;company; Charset = utf8; convert zero datetime = true&quot;</span>);        &#125;    &#125;&#125;</code></pre><h1>操作数据表</h1><h2 id="分解">分解</h2><p>在Dao下新建EmployeeHandler，并创建一个接收<code>Model.Employee</code>对象的Add函数：</p><pre><code class="highlight csharp"><span class="keyword">namespace</span> &lt;<span class="title">ProjectName</span>&gt;.<span class="title">Dao</span>&#123;    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EmployeeHandler</span>    &#123;        <span class="function"><span class="keyword">static</span> <span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params">Model.Employee model</span>)</span>        &#123;            <span class="comment">// Code will goes here</span>        &#125;    &#125;&#125;</code></pre><p>首先，将model的属性名与属性值映射为字典<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>。</p><pre><code class="highlight csharp"><span class="comment">// Put property names and property values of model as pairs into dictionary</span>Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt; propertyDict = model.GetType().GetProperties()    .ToDictionary    (        propInfo =&gt; propInfo.Name,        <span class="comment">// Add quote to avoid user input breaks SQL command</span>        propInfo =&gt; <span class="string">$&quot;&#x27;<span class="subst">&#123;propInfo.GetValue(model, <span class="literal">null</span>)&#125;</span>&#x27;&quot;</span>    );</code></pre><p>结合Dictionary.Keys和Dictionary.Values分别获取它们的键的列表与值的列表<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>，再使用<code>string.Join()</code>构造SQL命令语句。</p><pre><code class="highlight csharp"><span class="comment">// Build a SQL command by traversing properties of model</span><span class="comment">// For example: &quot;INSERT INTO table (column1, column2) VALUES (&#x27;value1&#x27;, &#x27;value2&#x27;);&quot;</span><span class="built_in">string</span> sqlCmd = <span class="string">$&quot;INSERT INTO employees (&quot;</span> +    <span class="string">$&quot;<span class="subst">&#123;<span class="built_in">string</span>.Join(<span class="string">&quot;, &quot;</span>, propertyDict.Keys)&#125;</span>) VALUES &quot;</span> +    <span class="string">$&quot;(<span class="subst">&#123;<span class="built_in">string</span>.Join(<span class="string">&quot;, &quot;</span>, propertyDict.Values)&#125;</span>);&quot;</span>;</code></pre><p>剩下就是没什么好讲的执行过程了。</p><pre><code class="highlight csharp">MySqlCommand cmd  = <span class="keyword">new</span> MySqlCommand(sqlCmd, CompanyDb.connection);cmd.Connection.Open();<span class="built_in">int</span> resultCode = cmd.ExecuteNonQuery();cmd.Connection.Close();<span class="keyword">return</span> resultCode;</code></pre><h2 id="总览">总览</h2><pre><code class="highlight csharp"><span class="keyword">namespace</span> &lt;<span class="title">ProjectName</span>&gt;.<span class="title">Dao</span>&#123;    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EmployeeHandler</span>    &#123;        <span class="function"><span class="keyword">static</span> <span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params">Model.Employee model</span>)</span>        &#123;            <span class="comment">// Put property names and property values of model as pairs into dictionary</span>            Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">object</span>&gt; propertyDict = model.GetType().GetProperties()                .ToDictionary                (                    propInfo =&gt; propInfo.Name,                    <span class="comment">// Add quote to avoid user input breaks SQL command</span>                    propInfo =&gt; <span class="string">$&quot;&#x27;<span class="subst">&#123;propInfo.GetValue(model, <span class="literal">null</span>)&#125;</span>&#x27;&quot;</span>                );                            <span class="comment">// Build a SQL command by traversing properties of model</span>            <span class="comment">// For example: &quot;INSERT INTO table (column1, column2) VALUES (&#x27;value1&#x27;, &#x27;value2&#x27;);&quot;</span>            <span class="built_in">string</span> sqlCmd = <span class="string">$&quot;INSERT INTO employees (&quot;</span> +                <span class="string">$&quot;<span class="subst">&#123;<span class="built_in">string</span>.Join(<span class="string">&quot;, &quot;</span>, propertyDict.Keys)&#125;</span>) VALUES &quot;</span> +                <span class="string">$&quot;(<span class="subst">&#123;<span class="built_in">string</span>.Join(<span class="string">&quot;, &quot;</span>, propertyDict.Values)&#125;</span>);&quot;</span>;            MySqlCommand cmd  = <span class="keyword">new</span> MySqlCommand(sqlCmd, CompanyDb.connection);            cmd.Connection.Open();            <span class="built_in">int</span> resultCode = cmd.ExecuteNonQuery();            cmd.Connection.Close();            <span class="keyword">return</span> resultCode;        &#125;    &#125;&#125;</code></pre><h1>使用</h1><pre><code class="highlight csharp">EmployeeHandler.Add(<span class="keyword">new</span> Model.Employee(name, age, telephone, address));</code></pre><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://csharpindepth.com/articles/singleton">Implementing the Singleton Pattern in C#</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://stackoverflow.com/questions/4943817/mapping-object-to-dictionary-and-vice-versa/4944547#4944547">c# - Mapping object to dictionary and vice versa - Stack Overflow</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2?view=netcore-3.1#examples">Dictionary&lt;TKey,TValue&gt; Class (System.Collections.Generic) | Microsoft Docs</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
    
    
    <summary type="html">&lt;p&gt;学习了一些面向对象的语言之后，总会想要实现一些高层次的抽象。这篇文章用反射实现了insert SQL的命令，简易实现了ORM。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>重重掩盖下的真心——《Atri -My Dear Moments-》</title>
    <link href="https://echo.moe/atri/"/>
    <id>https://echo.moe/atri/</id>
    <published>2020-06-30T15:21:17.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<p>【剧透】本应可以给玩家更多遐想，却强迫故事悲剧结尾。</p><span id="more"></span><h2 id="剧情">剧情</h2><h3 id="背景">背景</h3><p>故事发生在一个废土世界，海平面每隔一段时间便上涨，人类的科技水平下降到了很低的层次。女主仿生人亚托莉的主人曾是男主夏生的母亲，在一次阻止母亲被校园暴力的事件中出手，重伤了对方，女主被回收后出逃，出逃后的女主仍默默地守护着夏生一家。</p><p><img src="https://i.loli.net/2020/06/30/1nJz5CVaBYX3ike.jpg" alt="海平面上升致使人类灭亡"></p><p>在一次隧道坍塌的事故中，女主听从了旧主的遗言：去海边等我，主人转为「那个孩子」。女主救出了男主，但男主也因此<strong>失去了一条右腿</strong>。</p><p><img src="https://i.loli.net/2020/06/30/fczupZVjboKr7QA.jpg" alt="移交主人"></p><p>灰心的男主来到了海边想要自杀，遇到了无法理解旧主遗言，认为自己已经被抛弃的女主。此时男主并不知道女主的身份，男主劝说女主不要自毁，而女主抱住男主阻止他自杀。爱恋在男主心中生根发芽，男主便<strong>向女主许诺</strong>：去学校，拯救世界，拯救女主。</p><p><img src="https://i.loli.net/2020/06/30/mUlrq9aCQ2KHs3j.jpg" alt="地球也包括我吗？"></p><h3 id="当下">当下</h3><p>多年后，现实打败了男主，男主幼年的记忆也已模糊，但仍未忘却对女主的爱慕。重归小镇，应外婆的遗言，捞起了失忆的女主。女主只能想起自己有未尽之事。</p><p><img src="https://i.loli.net/2020/06/30/zmxU5SBJN4L8RhY.jpg" alt="被戳穿而脸红的夏生"></p><p>通过一段时间的相处，两人慢慢寻回记忆中的碎片，也通过辅导孩子上学、给学校通电和打捞村民沉没的珍贵物品在村中树立了威望。男主<strong>向女主告白</strong>，而女主也渐渐通过学习，以恋人的方式和男主相处。</p><p><img src="https://i.loli.net/2020/06/30/U2PbYFJo57fwEOp.jpg" alt="人不能，至少不应该"></p><p>然而，男主偷看了女主每日记录的日志。日志里没有感情，只有陈述句。男主才意识到，<strong>女主只是学习如何讨好男主</strong>，并没有和人类相同的感情。尽管真相残酷，但男主仍然愿意以情侣的关系和女主相处。</p><p><img src="https://i.loli.net/2020/06/30/taZUX6HhYOQ1KDv.jpg" alt="真是个纯情小处男啊！"></p><p>因为女主是从外婆家打捞上来的，所以男主照外婆要求登上了伊甸岛——一个大型生态系统，发现外婆希望将女主的AI导入岛内，管理这座岛。但相应地，女主会「死亡」。这时的女主回忆起来，自己的<strong>主人并不是外婆</strong>，而且最终命令并非接管这座岛。</p><p><img src="https://i.loli.net/2020/06/30/3VOruplqzILegBR.jpg" alt="其实是外婆的一番好意"></p><p>这时，女主的设计师的弟子安田找上门来复仇。因为女主伤人事件，他的老师走头无路，郁郁而终。他反复地将自己的怒气撒在女主身上，此时的男主刚起床，才得知女主遭遇不测，翻看女主的日志，发现女主已经完全拾回三十年前的记忆。并且从<strong>日志中的泪痕</strong>里得知了女主拥有「心」。</p><p><img src="https://i.loli.net/2021/02/10/2gKmoxFvf8JyChU.png" alt="哭着写日志"></p><p>出门前发现女主忘穿鞋子，这里会有第三个选项：1. 捡起鞋子 2. 放着不管。如果前两个选项选择正确，捡起鞋子的happy ending就会变成可选，反之进入bad ending。两个选项都触发过后，主界面才会显示true ending。（见<a href="https://steamcommunity.com/sharedfiles/filedetails/?id=2134692491">全结局攻略</a>）</p><p><img src="https://i.loli.net/2020/06/30/nOzCaehmySWdRX9.jpg" alt="TE触发选项"></p><p>这时捡起鞋子的夏生一路摔倒，但好在平日里行善积德，镇上的快递员送他一程，及时赶到现场。帮女主挨了一电。女主<strong>再次违反机器人三定律</strong>，殴打安田。这时男主告诉女主，这是你心中的愤怒。</p><p><img src="https://i.loli.net/2020/06/30/eISJgdBN6DXRnE7.jpg" alt="黑化的亚托莉"></p><p>此时安田仍然相信，这是程序错误。但男主摊开日志，告诉安田女主的泪痕。而仿生人却没有流泪的功能，男主则让女主不要装作机器人，尝试自我表达。</p><p><img src="https://i.loli.net/2020/06/30/4o7zXPOcYS6gvqG.jpg" alt="嚎啕大哭的亚托莉"></p><p>而后，男主则用喜悦和悲伤、幸福和不幸的相对概念，教会女主认识情绪。最后四天里，女主真正认识到了自己的爱慕之情，<strong>重新开始约会</strong>。但记忆越来越不靠谱，女主提出请求，要在记忆彻底重置前，在岛上结束生命。</p><p><img src="https://i.loli.net/2020/06/30/PW2HEGecKwYqRg7.jpg" alt="请你亲手杀掉我"></p><p>上岛后，男主与女主重新约定，一定要拯救世界，也拯救女主。</p><p><img src="https://i.loli.net/2020/06/30/LXgWKRuZye8SN1P.jpg" alt="你就是地球的中心"></p><h3 id="真结局">真结局</h3><p>男主和女二结婚了，男主推动了浮岛生态系统和AI技术的进步，功成身退。女主也将结束使命，沉入海中。在最后一天里，男主将意识导入信息网络中，和女主度过最后一天。</p><p><img src="https://i.loli.net/2020/06/30/IAgC15MXyaOp6zW.jpg" alt="可怜的水菜萌"></p><h2 id="评价">评价</h2><p>首先，作品<strong>使用了许多动画</strong>。我虽然玩过的galgame比较少，但玩过的作品都没有Atri这样的动画。这是这个作品的独特之处。</p><p><img src="https://i.loli.net/2020/06/30/zSJGRodYHTcvhqg.gif" alt="潜水艇下水"><br><img src="https://i.loli.net/2020/06/30/KHI4fFp8ETAqSxh.gif" alt="亚托莉泼水嬉戏"></p><p>我最喜欢的一首BGM就是《快要窒息（窒息寸前）》，印象最深的时刻是主角遇到伊甸岛时。红光扫过，对未知的「幽灵岛」恐惧，紧张和害怕使我有些慌乱，尽管我知道这个游戏绝不是惊悚类型的。</p><p><img src="https://i.loli.net/2020/06/30/2DKiJzL5tn1ZVEa.jpg" alt="幽灵岛的首次登场"></p><p>整部游戏以720P制作，在现在1080P起步的时代里，全屏游玩会有种线条不干净的模糊感。其次是场景，很多日常剧情发生在船上和学校里，给人一种两点一线的单调感。实际上，这个游戏的场景根本就不少，但是剧情大多都被没有什么内容的日常占走了，而这些日常基本都发生在这两个地方，别的场景基本只去了两三次，完全就是被浪费掉了。</p><p>我敢说，大多数消费者都是看着<strong>女主的立绘</strong>才冲动购物的。按我个人观点，其实游戏定价还是高了一些，如果它落在40人民币这个价位的话，这部作品就还算不错了。我<a href="https://twitter.com/Wordless_Echo/status/1276929944686223363">在Twitter上发了不少截图</a>。顺便我还要夸一下女主的声优，因为女主经历过喜悦、无感情、悲伤和羞涩这四个阶段。<strong>女主的声线在每个阶段都有截然不同的感觉</strong>，不得不说声音确实给这幅立绘赋予了强大的感情。</p><p>让我颇为不满的则是这个游戏的<strong>人物塑造</strong>，游戏留给背景的补全、配角的性格塑造和更多的可能性的内容实在是太少了。</p><p>一是青梅竹马的水菜萌，水菜萌常常给男主做饭，还帮女主解答与男主相关的恋爱问题，最后还被女主拜托照顾男主，男主死后还想和女主在一起。<br><strong>水菜萌遭受了编剧很多不公的待遇</strong>。</p><p><img src="https://i.loli.net/2020/06/30/dkDIU2cqypTK9iR.jpg" alt="备胎"></p><p>二是龙司，因凛凛花而与男主交好，后来好到了可以交心的程度，甚至说出一些对男主人生非常有帮助的理解和支持。比如支持男女主恋爱、支持男主回到研究院甚至是担心男主，也能接受男主留在乡村里。我觉得龙司的戏份完全可以更多一些（虽然<strong>立绘连嘴都是歪的</strong>）。</p><p><img src="https://i.loli.net/2020/06/30/CRLrIfjcds7zYv8.jpg" alt="哪怕是机器人之恋"><br><img src="https://i.loli.net/2020/06/30/VMTymiDbBrLx3P6.jpg" alt="你值得拥有更好的前途"><br><img src="https://i.loli.net/2020/06/30/fk2X1bQWHaLiIln.jpg" alt="无论你想什么都支持你"></p><p>最为莫名其妙的就是开头以「追债人」身份登场，后又做回教师的花子。她一共说了两次谎，最终玩家能了解到的信息就是和复仇者安田有关系。于是男主的天价债务虎头蛇尾，究竟是真是假都不知道。</p><p><img src="https://i.loli.net/2020/06/30/xHshRwBOZyY2mQF.jpg" alt="两个说辞都是谎言"></p><p>最后是这部游戏的剧情，前半段和后半段虽然完全可以当作两个故事来看，但<strong>伏笔埋藏得当</strong>。可以说是「情理之外，意料之中」吧。</p><p>首先，作为AI专业的男主。虽理性明白女主「没有感情」，但感性上仍然愿意相信女主会拥有感情。哪怕谎言被自己亲手戳穿，也愿意对女主单相思。</p><p><img src="https://i.loli.net/2020/06/30/ZInmTAueCcokvO1.jpg" alt="恐怕头顶绿帽也有这样的感受吧"></p><p>其次是仿生人不会流泪的设定。仿生人物理搭载了清理眼球的功能，但是没有作为情绪宣泄的功能。虽然通过这个功能判断机器人意识的设定<strong>十分不严谨</strong>，但是考虑到本游戏的目标客户确实是尚可接受的。但我认为剧情上完全可以在情绪主导行为和自我意识表达上，描写女主突破机器人三定律而「变成人类」的内容。然而很可惜，游戏选择了更简单的表达。</p><p><img src="https://i.loli.net/2020/06/30/b6DXY2OReJg7m5A.jpg" alt="外婆的内心斗争"></p><p>最后，我希望剧情能给玩家提供更好结局的<strong>希望</strong>。至少要给玩家一种「男主尽全力拯救女主」的感觉。无论是HE还是TE，男主说好的「拯救女主」别说是兑现了，连尝试都没有做过。<br><strong>女主获得感情，真正给玩家的剧情却只有四天，四天里甚至还做了和前四十天差不多的事情。</strong><br>让我对女主存于人世感到十分抑郁，吃了快三十年的苦，最终只意识到了四天的幸福。</p><p>本质上，这个游戏只是个恋爱游戏而已。编剧还是对自己的能力太过自信，把背景拉得很宏伟（人类科技倒退、世界被海洋淹没），自身的格局又太小（前篇全是女主的废萌，使得男主攻略女主后的内容与前面「虚假」的桥段反差太大）。很多地方都有圆回来的痕迹。</p><h2 id="后记">后记</h2><p>后记是一些我自己的碎碎念吧。我和夏生有些许的共鸣，能知道因为放弃梦想而自暴自弃的感受。在与龙司初次见面时，龙司最尖锐的问题在普通人看来可能问题不大——如果读书有用，那你为什么会流落到这里？</p><p>夏生有PTSD，在这样的心境下，若不是亚托莉的陪伴，他很难再自己活下来。不过最终他还是获得了亚托莉的支持：希望夏生不要舍弃自己的未来。</p><p><img src="https://i.loli.net/2020/06/30/3qWzsgVafmEYMP5.jpg" alt="你还有未来"></p><p>父亲造火箭可以连儿子断了条腿都不回来看，母亲在幼时就离开了他，外婆是研究海洋造岛的怪人。这样的环境下，他自己也将「获得救赎」的命运很可笑地联系在拯救地球上。对于一个孤独努力的孩子来说，拯救地球是多么大的压力啊？</p><p><img src="https://i.loli.net/2020/06/30/BUuh38joKQqMgOS.jpg" alt="满堂天才"></p><p>这个游戏打得我很抑郁，在于男主执意戳穿女主的谎言。引发了我许多哲学思考：</p><p><a href="https://twitter.com/Wordless_Echo/status/1277508850644484098">持续的骗局就是真相</a></p><blockquote><p>我们曾说，如果一个大恶人，一直都装成好人，做一生的善事，那他就是一个好人。那么如果一个AI通过神经网络，成为一个会对人类感情做出适当反应的AI，那么它不就是一个人类了么？</p></blockquote><p><a href="https://twitter.com/Wordless_Echo/status/1277509214135398400">脑后插管的黑客帝国</a></p><blockquote><p>我觉得这是一个相当哲学的思辨，如果一个「骗局」一直持续下去，那它就是真的。如同《黑客帝国》一般，如果我们现在的的确确活在一个脑后插管而又浑然不觉的世界里，在这个虚拟世界里的死亡对于我们来说就一定是实在的。</p></blockquote><p><img src="https://i.loli.net/2020/06/30/9UqDHvxTWOsFeZL.jpg" alt="拥有心不就是抗命的导火索么"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;【剧透】本应可以给玩家更多遐想，却强迫故事悲剧结尾。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>为Android的CJK加上多字重之拾遗</title>
    <link href="https://echo.moe/review-multi-font-weight-for-android-cjk/"/>
    <id>https://echo.moe/review-multi-font-weight-for-android-cjk/</id>
    <published>2020-05-30T16:11:01.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<p>从回顾看当下的Android对字体方面的功能改进。</p><span id="more"></span><p>各位好，我是回音。是<a href="https://zhuanlan.zhihu.com/p/25027320">Android 7+ 添加全字重 Noto Sans CJK</a>的作者。在过去三年多的时间里，Android经历了两个版本的迭代。从这篇文章落稿后，我又回顾了「为Android CJK字体加上多字重」的事情。</p><h2 id="Maigsk模块">Maigsk模块</h2><p>首先是<a href="https://github.com/simonsmh">@simonsmh</a>维护的<br><a href="https://github.com/simonsmh/notocjk">notocjk</a>这个Magisk模块。它的旧名为magisk-notosanscjk-nougat，一开始由于GitHub免费版单文件最大大小限制为100MB，所以并没有采用单文件的super OTC方案，而是一个字重分一个文件。后来Android P加入了Noto Serif CJK，<a href="https://github.com/simonsmh">@simonsmh</a>又做了一个NotoCJK-P。不久后合并到一个模块，即NotoCJK中处理。</p><p>后来Magisk框架的主要维护者，John Wu决定清理低质模块，<a href="https://twitter.com/topjohnwu/status/1229896206584664065">顺带一并清除了所有字体模块</a>。我能理解他的做法，大多数字体模块只是简单的将字体重命名为Roboto-Regular.ttf，然后把系统默认字体替换掉。不过NotoCJK这个模块绝不是，因为涉及到要加字重，所以必须要修改fonts.xml。具体大家可以看我原来写的文章。</p><h2 id="Rikka的FontProvider">Rikka的FontProvider</h2><p>Rikka在文章发布半年后推出了一个叫<a href="https://github.com/RikkaApps/FontProvider">FontProvider</a>的应用。本质上是通过安装一个应用，下载全字重的字体文件，然后供各种应用调用。</p><p>本意是希望建立一个生态，替换掉Google稀烂的<br><a href="https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts">downloadable fonts</a>，提供给不希望修改系统的用户。然而建立生态是十分困难的，Rikka作为一个独立开发者很难推动用户和开发者两边的人都使用这个应用，项目在一段时间后停止维护，在Android 10上字体预览也不太正常。</p><h2 id="Android中的使用">Android中的使用</h2><p>接下来说说Android和这套字体的关系。细心的朋友可能会注意到，Noto Sans CJK还提供了等宽字体（monospace）的常规字重和粗体字重。</p><p>在Android P之前，CJK字体和西文字体并不是「对等关系」。西文有非衬线体、衬线体、condensed（抱歉，我真不知道它的中文是什么）和等宽字体，这些不同类型的字体遇到中文后，只能统一转到CJK的「非衬线体」（中文里对应的是黑体）。<br>Android P则加入了fallbackFor这个属性，Google用来支持CJK的「衬线体」（中文里对应的是宋体）。其实也就同时开放了CJK字体对condensed和等宽字体的支持。</p><p>在Android P以前，Android调用不同字重的字体靠的是fontFamily属性，比如我想调用非衬线体的medium字重的话，我需要指定fontFamily为sans-serif-medium。对我的文章有比较深入了解的朋友就会好奇了，我们在fonts.xml中，指定字重写的是一个个数值，根本没有见到字重的名字啊？</p><p>其实fonts.xml里用了一个alias（别名）标签，给这些数值取名，然后开发者才能正确调用这些字重。Noto Sans CJK总共7种字重，相较于Roboto，多一个demi-light（350）字重。而Noto Serif CJK也有7种字重，Noto Serif则仅有可怜的regular和bold字重，多了足足5种。这也就意味着系统里本身是不会自带sans-serif-demi-light这类标签的，这导致了这类字重处在一个很尴尬的位置——<br>没有办法被调用。Android P则给开发者引入了一个新的textFontWeight属性，允许开发者设定具体数值。</p><p>这里讲一个小插曲，中文注音符号的字体从<br><a href="https://android.googlesource.com/platform/frameworks/base/+/refs/heads/nougat-dev/data/fonts/fonts.xml#340">7.0预览版</a>开始就一直处于TODO状态。</p><pre><code class="highlight xml"><span class="comment">&lt;!-- <span class="doctag">TODO:</span> Add Bopo --&gt;</span></code></pre><p>但是直到<br><a href="https://android.googlesource.com/platform/frameworks/base/+/refs/tags/android-9.0.0_r56/data/fonts/fonts.xml#527">9.0</a><br>Google才正式把这个坑填上</p><pre><code class="highlight xml"><span class="tag">&lt;<span class="name">family</span> <span class="attr">lang</span>=<span class="string">&quot;zh-Hant zh-Bopo&quot;</span>&gt;</span></code></pre><p>然后在<br><a href="https://android.googlesource.com/platform/frameworks/base/+/refs/tags/android-10.0.0_r36/data/fonts/fonts.xml#552">10.0</a><br>里又改了一次，加了个逗号进去</p><pre><code class="highlight xml"><span class="tag">&lt;<span class="name">family</span> <span class="attr">lang</span>=<span class="string">&quot;zh-Hant,zh-Bopo&quot;</span>&gt;</span></code></pre><h2 id="孪生兄弟：思源字体">孪生兄弟：思源字体</h2><p>再讲讲Noto CJK和它的孪生兄弟思源字体。Noto和思源本质上是同一套字体，不过他们之间又有一些细微的差别。首先是字重，各位看下面这张表就可以了，我怕绕晕大家。</p><p><img src="https://i.loli.net/2020/05/31/KENmsWrp5nJGjVb.jpg" alt="font-weight-between-the-source-han-and-noto.jpg"></p><p>其次是字形，Noto CJK分为简体中文、繁体中文、日语和韩语。而思源黑体则分为简体中文、繁体中文、香港、日语和韩语。这时可能马上就会跳出一个人说，香港出现在这里十分突兀啊！</p><p>这是因为两者的繁体中文都是基于台湾标准的，所以和香港标准的多少有所不同。不过如果你在<br><a href="https://github.com/adobe-fonts/source-han-super-otc">Adobe的ultra OTC项目</a>里下载的话，就会得到一份Noto CJK HK，这说明Noto也是可以打包出香港版本的。遗憾的是，Android的字体仍不能做到这么精确设定，期待Android后续的改进了。</p><p>最后，仍要感谢<a href="https://twitter.com/tsopn">Toby Tso</a>老师写了很多关于这方面的文章，除了查阅AOSP源代码，很多关键部分少不了他的支持。顺便宣传一下<a href="https://github.com/WordlessEcho/Noto-Super-OTC-Installer">我做的super otc的模块</a>。感谢阅读！</p><h2 id="参考资料">参考资料</h2><ol><li><a href="https://medium.com/ujam/the-relation-between-source-han-sans-and-noto-sans-cjk-11a6309f06da">Source Han Sans 與 Noto Sans CJK 之字重對應</a></li><li><a href="https://fonts.google.com/specimen/Noto+Serif+SC">Noto Serif SC - Google Fonts</a></li><li><a href="https://fonts.adobe.com/fonts/source-han-sans-simplified-chinese#details-section">Source Han Sans Simplified Chinese | Adobe Fonts</a></li><li><a href="https://fonts.adobe.com/fonts/source-han-serif-simplified-chinese#details-section">Source Han Serif Simplified Chinese | Adobe Fonts</a></li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;从回顾看当下的Android对字体方面的功能改进。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>装台一身甜品的小机箱</title>
    <link href="https://echo.moe/6k-tiny-pc/"/>
    <id>https://echo.moe/6k-tiny-pc/</id>
    <published>2020-05-04T06:17:20.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<p>虽然说是小机箱，其实是mATX层面上的小。</p><span id="more"></span><p>因为我的联想小新Pro 13锐龙版<a href="https://twitter.com/Wordless_Echo/status/1209383991989587968">修过实在太多次</a>，加之疫情影响，换新后立刻出二手装了台机。好在出手还算比较快，2020款的消息放出来以后，这台机器在拼多多上的价格就开始雪崩了。</p><p>在此之前，如我选择笔记本时一样，我其实对PC硬件了解十分少。但是按直觉来说，这些知识在互联网上随处可得。花了三四天时间搜索研究一下，最后写了一套配置：</p><ul><li>板U：B450M迫击炮MAX+3600（1700）</li><li>内存：2×8G套阿斯加特3200灯条（500）</li><li>显卡：耕升1660 Super炫光OC（1600）</li><li>电源：酷冷至尊GX450（340）</li><li>机箱：银欣PS15B侧透（240）</li><li>散热器：雅俊G3（120）</li><li>硅脂：信越7921（25）</li><li>风扇：4×采融PT12025（140）</li><li>网卡：AX200（120）</li><li>魔术贴：山泽MST-30（18）</li></ul><p>一套下来4800，不得不感叹钱难赚，硬盘只好用旧电脑上的西数绿盘凑合。U盘主控的SSD也算是丢人的垃圾了，但是最近SSD价格实在是很高（SN550 1T京东价1k2），总之又不是不能用。</p><hr><p>装机对于我这种出生在电脑店的人来说，其实是一件挺普通的事。所谓「没吃过猪肉，也见过猪跑」，看了下<a href="https://www.bilibili.com/video/BV1jE411e7hw">硬件茶谈的装机视频</a>就开始上手了。但是实际上也遇到了一些问题。</p><p><strong>散热器</strong>：我从来没有装过散热器，首先硅脂涂得太多，其次力度大了怕把顶盖压坏，所以我第一次拧的时候压根没有拧进去。结果到了主板已经固定在机箱上的时候，好一会散热器才掉了下来（不亏是信越水泥）。于是我把硅脂擦了重新涂，雅俊G3的散热器使用的是弹簧螺丝，很难感觉螺丝孔位是否对齐，所以我扭了左边，发现右边似乎对不齐，把左边扭松一些再把右边扭进去；然后又发现左边似乎也对不齐，就把右边再扭松。重复几回之后，手动抓住螺丝对接处摆正，大力出奇迹，这才扭上了散热器。</p><p><img src="https://i.loli.net/2020/05/04/iqwxrPQfSsHhKpk.jpg" alt="压根没扭紧的散热器"><br><img src="https://i.loli.net/2020/05/04/LK5CsqkAZYwQxHd.jpg" alt="后来再涂的硅脂"></p><p><strong>机箱风扇</strong>：一开始是怕把螺丝扭坏，我没有敢把风扇螺丝扭进去，后来想了一下风扇压根没有螺纹，这种特别的螺丝天生就是要大力出奇迹，硬干！想了一下不要把风扇扭得太紧，碰到减震垫就差不多了。</p><p><strong>IO挡板</strong>：挡板上的金属弹片好几次都卡在接口里了，一开始是RJ54，后来是USB口。害得我前前后后拆了五六次主板，重新拉出来再推进去。装主板的时候还是要细心，仔细观察每个接口是不是都没有被金属弹片挡住，否则进进出出。</p><p><strong>机箱</strong>：小箱子比较考验走线，所以一开始我对走线有一个清晰的规划，所以即使我使用了非模组电源，这方面我也没遇到问题。反倒是插显卡的时候发现，机箱的PCI-E孔位不正，还是大力出奇迹，强行给它扭上去。</p><p><img src="https://i.loli.net/2020/05/04/EHkdFw4gGzOpRVA.jpg" alt="对不齐的PCI-E"><br><img src="https://i.loli.net/2020/05/04/4QpRT351GBuwdOn.jpg" alt="正面走线"><br><img src="https://i.loli.net/2020/05/04/kynjMgSTCql8W4P.jpg" alt="乱糟糟的背面"></p><h1>关灯</h1><p>虽然我用的是侧透机箱，但是我本身对RGB并没有兴趣，所以我开进系统后第一时间想办法关掉灯效。有些读者会有疑惑，没灯为什么要买侧透机箱？一是非侧透没有省多少钱，二是我喜欢透明的感觉。</p><p>首先是灯条，灯条的灯光控制很简单，我用的是微星的主板，下载了<br><a href="https://cn.msi.com/Landing/dragon-center-download">Dragon Center</a>之后，Mystic Light里就可以关闭。缺点是只有系统启动后才会应用这些设置。</p><p>其次是耕升的显卡，首先他们有一个叫<a href="http://www.gainward.cn/Home/ExperTool">EXPERTool III</a>的工具，还有一个叫<a href="http://www.gainward.cn/Home/Mate">Soul Mate</a>的工具。理论上两者是实现同一个功能的，然而前者在1909没法打开，旧版本能打开但是没法控制灯光。后者要同时安装C++ 2008 32位运行库，否则会出现「并行配置不正确」的报错。Soul Mate里有一个LED服务，启用之后直接占满一个核，吓得我又把LED服务卸载了，但是对我关灯的目的没有影响，不过耕升的灯光控制是始终保存的，无论是不是在系统内都会关灯。</p><h1>风扇</h1><p>如果你完全使用默认设置，你一定会发现风扇非常地吵。进BIOS之后把风扇调成PWM，然后按照温度升速降速，结果进到系统里还是非常大声，不一样的是，风扇像拉风箱一样时高时低地转。查了一下，发现Zen 2待机温度忽高忽低属于通病。于是我把CPU风扇的step time改为0.3s，机箱风扇的step time改为0.7s。由于我待机温度在40到65度直接跳动，我又把65度的风扇转速设置为60%，风扇就不对温度那么敏感了。缺点是P95烤机的时候温度会迅速上升到88度（我开启了PBO），此时CPU风扇的转速提升地比较快，但是机箱风扇需要一分钟左右的时间才会达到满速旋转。不过我对这个设置非常满意了。</p><h1>超内存</h1><p>XMP打开跑3200之后，tRFC压到300，直接开机，结果没能跑起来，说明没抽中<a href="https://tieba.baidu.com/p/6417603570">新南亚颗粒</a>。想试试能不能上3600，用Memory Try it，3600 16-18-18-18和3600 20 20 20 42都不过P95，再调小参就没什么意思了，还是放弃了开XMP直接用。</p><p>这次是我第一次装机，光把所有配件装进机箱里我都用了四个多小时，装机也算是一种体力活，前前后后粗心大意还是折腾了不久。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;虽然说是小机箱，其实是mATX层面上的小。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>个人介绍</title>
    <link href="https://echo.moe/about/"/>
    <id>https://echo.moe/about/</id>
    <published>2020-04-05T10:21:13.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<p>简单说说怎么找到我、我喜欢什么、我的朋友们。</p><span id="more"></span><h1>没有字的回音</h1><p>我觉得各位最好奇的是我如何描述我自己。但我觉得一个人是什么样的，应由别人来描述，我自己说了是不算的，所以我并不会说我是个怎么样的人。但是，我会告诉你我喜欢些什么，话题总是从兴趣中延申出来的。如无特殊声明，本章文章皆以<a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>授权。</p><h2 id="社交帐号">社交帐号</h2><ul><li><a href="https://t.me/WordlessEcho">Telegram</a></li><li><a href="https://twitter.com/Wordless_Echo">Twitter</a></li></ul><h2 id="爱好">爱好</h2><h3 id="守望先锋">守望先锋</h3><p>之所以把守望先锋单独列出来，是因为这么多的FPS游戏里，我能掌握的只有守望先锋（悲）。其它FPS对我来说太复杂了，我更喜欢指哪打哪的感觉。但是我常年都是单排玩家，因为这个游戏太强调团队，再加上十分恶意的匹配系统，很容易拆车破坏大家的感情。目前水平在国服钻石往下一些，只能说是入门了吧。</p><h3 id="动作游戏">动作游戏</h3><p>我玩过只狼、鬼泣5和Ori一二代，有机会的话还想玩一下黑暗之魂。一开始我是画风型玩家，看上Ori和鬼泣5都是因为喜欢它的画风，后来又欣赏了其他高端玩家的操作，就有了一种「哇，这个好帅，我也想玩出这样的操作」的感觉。只狼则更多是因为喜欢「打铁」，许多人说只狼的本质是音游，不过我并不擅长玩音游。因为我是背板选手，在无数次失败中找感觉，而不是视觉上进行反应，音游背板太困难了。</p><h3 id="看动画">看动画</h3><p>我已经很久没看动画了，一直以来都是挑画风看动画，目前还没有出现情节上让我非常喜欢的动画作品。所以我看了几部京都动画的作品，用作头像的主角有黑岩射手（入宅作）、小鸟游六花和栗山未来。<s>下一个头像大概会用黄前久美子吧（笑）</s>。结果用了小鸟游六花。</p><h3 id="写代码">写代码</h3><p>因为我家开了一个维修手机和电脑的小店，所以我从小就受熏陶喜欢上了和计算机有关的事物。<br>Android Lollipop带着Material Deisgn问世之后，因为我被Material Design所深深吸引，便下定决心要写代码。后来我勉强掌握了Java和Python，但是我没有做出什么成品，也错过了那个时代。</p><h2 id="友情链接">友情链接</h2><p>在Twitter或是Telegram上和我互动过的朋友直接<a href="mailto://me@wordlessecho.com">向我发送邮件</a>就可以了。不要觉得我很高冷，毕竟一来我没法写介绍，二来如果我完全不认识你也没法叫<strong>友情</strong>链接啦w。下面列出的顺序应该是认识的时间顺序（大概？），没有列出的可能是没找到链接，更多可能是因为我不确定对方认不认识我。</p><ul><li><a href="https://www.wsl.moe/">Kela Kim</a></li><li><a href="https://beetman.net/">Beet Yang</a></li><li><a href="https://daily.elepover.com/">Elepover</a></li><li><a href="https://simonsmh.cc/">Simon Smh</a></li><li><a href="https://feng.moe/">烧饼</a></li><li><a href="https://mak1t0.cc/">Makito</a></li><li><a href="https://eatradish.github.io/">萝卜</a></li><li><a href="https://daisuke.moe/">白兔</a></li><li><a href="https://blog.cn47mp.moe/">47</a></li><li><a href="https://qwq.moe/">蚊子</a></li><li><a href="https://blog.xmuu.dev/">xMuu</a></li><li><a href="https://9baka.moe">Kirin</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;简单说说怎么找到我、我喜欢什么、我的朋友们。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>重复的按钮</title>
    <link href="https://echo.moe/repeated-button/"/>
    <id>https://echo.moe/repeated-button/</id>
    <published>2020-04-03T06:13:59.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<p>不明确而同倾向性的按钮往往没有区别。</p><span id="more"></span><p><img src="https://i.loli.net/2020/04/03/drAUWJpCE59QboH.png" alt="哔哩哔哩点赞、投币和收藏按钮"><br>不知从何时开始，B站开始从投币和收藏两个按钮中再加入了点赞按钮，然后拓展到长按点赞可以同时完成「点赞、投币和收藏」的「一键三连」。同时也可以看到各大up开始求「一键三连」，显然是收益与三连数量开始挂钩了。这不禁让我感到困惑——一键三连让按钮的价值变低了。</p><p>过去，你可以明显的感受到，（完整）播放量是最次级的，投币是更上一层的，而收藏是最顶级的。点赞插在播放和投币中间，最后衍生出「一键三连」的操作，使后三个按钮变得更加廉价，拉低到了次于过去投币的层级。碎片化时代，平台用数据量化用户的价值，却将价值拉到更低的水平线上。</p><p>以前在知乎，我的赞同和感谢、反对和没有帮助常常成对使用，但当你静下心来仔细思考，发现点赞和反对的权重是相当高的。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>知乎鼓励思考后再赞同，但这对按钮的感情倾向十分明确，按下赞同就一定会感谢，但按下感谢却不点赞同的场景，就只有那些「用心回答但没法看懂」的回答了。我认为知乎在设立这两对按钮时有很深层的思考，但最终因为缺少用户引导而没有起到它应有的作用。</p><p><img src="https://i.loli.net/2020/04/03/yCLnITWUJzEBYpR.png" alt="长按Facebook点赞后的六种情绪"></p><p>我觉得Facebook在点赞的基础上，增加更细致的情绪表达就是一个非常好的方向。<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>我想当下的社交应当只有三类按钮：仅转发（即点赞）、情绪转发和附言转发。一种是传播内容，一种是表达情绪，最后一种则是讨论。</p><p>话题回到B站上，我认为收藏是用户的私人空间。站方确实可以将收藏数列为收益参考，但是请不要将我的收藏变得廉价，甚至道德绑架式地逼迫我反复使用收藏。</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://www.zhihu.com/question/19557420">知乎的「赞同」和「感谢」功能，各在什么情况下使用才合适？</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://about.fb.com/news/2016/02/reactions-now-available-globally/">Reactions Now Available Globally - About Facebook</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
    
    
    <summary type="html">&lt;p&gt;不明确而同倾向性的按钮往往没有区别。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>浅谈开放互联网和个性化广告</title>
    <link href="https://echo.moe/talk-about-open-web-and-personal-ads/"/>
    <id>https://echo.moe/talk-about-open-web-and-personal-ads/</id>
    <published>2020-04-02T09:44:50.000Z</published>
    <updated>2022-04-09T08:39:29.080Z</updated>
    
    <content type="html"><![CDATA[<p>开放互联网和可关闭的个性化广告，本质上应当是每个用户都应当捍卫的权利。</p><span id="more"></span><h1>开放互联网</h1><p><img src="https://i.loli.net/2020/04/02/bcA4k69ifpxoBPm.png" alt="被微信的封禁链接"></p><p>前段时间与群友谈到一则与游戏有关的事情，发现打开游戏官网的某个链接被举报后无法在微信内置的浏览器中访问。微信利用了其垄断地位，不仅将用户封闭在自己的应用内，甚至试图接手用户的方方面面，人送外号WeChatOS。以前看到一个名词，叫「流量猪圈」。每个应用都想把用户关在自家的花园里圈养起来，让一个应用能够满足用户的所有需求。然而术业有专攻，一个应用如果样样全面，必然个个平庸。我始终认同<a href="https://zh.wikipedia.org/wiki/Unix%E5%93%B2%E5%AD%A6">Unix哲学</a>：</p><blockquote><p>做一件事，做好它。</p></blockquote><p>换个角度来说，一个应用如果包揽了所有功能，必然也将造成垄断。封闭则是垄断的第一步，而我们也已经吃到了垄断的恶果——从淘宝分享到微信中，需要复制一大串火星文，然后发送出去。而对方收到后要复制这串火星文，再用淘宝打开。而这一切的起源，则是淘宝先手封杀了微信。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>在以前，搜索引擎是互联网的窗口。在搜索引擎出现以前，每个人的首页则是一个门户网站，收集了各种网站的网址。而在搜索引擎出现以后，你只需要网页内容的几个词句，往搜索引擎中输入，就可以找到那个网页。</p><p><img src="https://i.loli.net/2020/04/02/JdCvSPikRGhT7Ml.png" alt="不允许被索引的网站"></p><p>但今天的搜索引擎越来越难用了，即使使用搜索引擎也很难找出优质的内容了——淘宝、京东和微信文章都不允许索引。本该开放的内容却分散在各个网站，找一样东西要不厌其烦地打开一个又一个的应用，然后使用他们内置的搜索。有的甚至不提供网页版，用浏览器打开只能看到一个「请使用手机app查看」。但这些平台从未给用户选择的权利——每个用户理所应当地希望这些内容能被更广地传播出去，但这些平台都护着他们手中的内容。</p><p><img src="https://i.loli.net/2020/04/02/qVd1UcQtE6XRNhY.png" alt="小程序分享和链接分享"></p><p>还是举微信和QQ的例子来说，它们都没有实现链接预览的功能，而是通过私有的方式实现消息预览，更有甚者，直接生成一个小程序链接。而更过分的是，假借安全和控制骚扰信息为名随意禁止用户的分享，打压竞争对手，剥夺用户权利。禁止索引和应用内置浏览器都是出于保护公司利益的考量，但其本身是损害了用户的权益——用户因此越来越难获得曝光量，你生产的内容更难被互联网发现，被平台控制在手中。</p><h1>个性化广告</h1><p>在开始讨论之前，我们先来看看比较跟得上潮流的国家部门——工信部所颁布的法规：</p><blockquote><p>三、以下行为可被认定为“未经用户同意收集使用个人信息”</p><p>……</p><p>6.利用用户个人信息和算法定向推送信息，未提供非定向推送信息的选项；</p></blockquote><p>个性化广告的运作方式一般是平台收集用户浏览内容的数据，然后通过用户观看过的内容给用户打上标签。再从广告投放的目标人群标签中寻找对应的广告，推送给用户。关闭个性化广告只是拒绝了平台收集数据再给你打标签的过程，并不会停止推送广告内容。但是一部分应用则让我大开眼界<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>：</p><ul><li>支付宝：没有相关开关</li><li>微信和QQ：关闭六个月</li><li>新浪微博：关闭三个月</li><li>淘宝：位置十分隐晦</li></ul><p><img src="https://i.loli.net/2020/04/02/zEHwWnNG9rlTMUa.png" alt="Google隐私设置检查"></p><p>用户的隐私权本就是应当的权利，但许多应用反而将个性化广告视为自己的权利，阻碍用户关闭个性化广告。我认为在用户<strong>隐私控制可视化</strong>这方面，做得最好的是Google。甚至还能详细看到Google给你贴上的标签。</p><p>当下，我认为中国互联网用户对隐私的认识仍然太过薄弱。只有重视起来，逼迫政府出台法律，以逼迫公司遵守这些法律才能保护我们的权利。</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://mp.weixin.qq.com/s/4bDWU6G4FTY-jgnSDavI8w">淘宝会后悔封杀微信吗？ - keso怎么看</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://best.pconline.com.cn/yuanchuang/6257547.html">拒绝更懂你的个性化广告，关闭主流应用广告的技巧分享！</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
    
    
    <summary type="html">&lt;p&gt;开放互联网和可关闭的个性化广告，本质上应当是每个用户都应当捍卫的权利。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>在移动魔百盒（UNT401H）上安装任意应用</title>
    <link href="https://echo.moe/install-any-app-on-cmcc-iptv-unt401h/"/>
    <id>https://echo.moe/install-any-app-on-cmcc-iptv-unt401h/</id>
    <published>2019-05-10T01:53:09.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<p>由于广电政策限制，IPTV 是无法随意安装应用的，但这个盒子搭载 Andorid 系统还有 Wi-Fi，不用实在太可惜。一般这样的设备都会开放网络 ADB，用 ADB 安装之后再用 ADB 打开就可以了。</p><span id="more"></span><p>ADB 的端口开放在 30016，找到盒子的 IP 然后连接：</p><pre><code class="highlight shell">adb connect &lt;IP&gt;:30016</code></pre><p>连接成功后再安装 APK：</p><pre><code class="highlight shell">adb install &lt;path-to-your-apk&gt;.apk</code></pre><p>再使用 monkey 打开应用：</p><pre><code class="highlight shell">adb shell monkey -p app.package.name -c android.intent.category.LAUNCHER 1</code></pre><h1>感谢</h1><ul><li><a href="https://www.znds.com/forum.php?mod=viewthread&amp;tid=1138683">UNT401H 破解 思路_中国移动魔百盒_ZNDS</a></li><li><a href="https://www.mydigit.cn/forum.php?mod=viewthread&amp;tid=8849">九联UNT401H魔百合adb安装当贝桌面 - 机顶盒/智能电视 数码之家</a></li><li><a href="https://stackoverflow.com/a/25398877">How to start an application using android ADB tools? - Stack Overflow</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;由于广电政策限制，IPTV 是无法随意安装应用的，但这个盒子搭载 Andorid 系统还有 Wi-Fi，不用实在太可惜。一般这样的设备都会开放网络 ADB，用 ADB 安装之后再用 ADB 打开就可以了。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>用CloudFlare重定向域名</title>
    <link href="https://echo.moe/using-cloudflare-to-redirect/"/>
    <id>https://echo.moe/using-cloudflare-to-redirect/</id>
    <published>2018-12-21T19:14:16.000Z</published>
    <updated>2022-04-09T08:39:29.080Z</updated>
    
    <content type="html"><![CDATA[<p>拥有多个域名后的烦恼。</p><span id="more"></span><h1>需求</h1><p>我有一个用我真名命名的域名，姑且称为<code>xiaoming.com</code>。有一个圈名命名的域名，姑且称为<code>example.com</code>。</p><ul><li>将<code>xiaoming.com/</code>和<code>www.xiaoming.com/</code>的请求301重定向到<code>example.com/about</code></li><li>向下兼容以前在<code>xiaoming.com</code>下创建过的文章链接</li><li>将<code>www.example.com</code>的请求全部重定向到<code>example.com</code></li></ul><h1>配置</h1><h2 id="页面规则（Page-Rules）">页面规则（Page Rules）</h2><p>CloudFlare 有一个强大的功能，叫做 Page Rules，它可以实现链接匹配并进行一些特殊操作，例如：始终使用 HTTPS、始终在线（always online）和链接跳转等功能。免费版下，每个域名有三条规则的上限，不过对于现有需求来说也够用了。</p><p>首先打开 CloudFlare 面板 &gt; <a href="http://xiaoming.com">xiaoming.com</a> &gt; Page Rules 来创建两条规则：</p><ul><li>If: <code>*xiaoming.com/</code>, then: <code>https://example.com/about</code></li><li>If: <code>*xiaoming.com/*</code>, then: <code>https://example.com/$2</code></li></ul><blockquote><p>因为规则是顺位匹配的，所以在添加规则时，一定要注意规则的排序。</p></blockquote><p>同样，打开 <a href="http://example.com">example.com</a> 的 Page Rules：</p><ul><li>If: <code>*example.com/*</code>, then: <code>https://example.com/$2</code></li></ul><p>上述几条规则对于有编程经验的人来说应该不难理解，这里稍微做一些说明：</p><ul><li><p><code>*</code>即通配符，在此位置上的任意字符都会被判定为符合规则。比如<code>blog.example.com</code>、<code>www.example.com</code>和<code>example.com/foobar</code>都会匹配到<code>*example.com/*</code>这条规则，而<code>example.com/foobar</code>和<code>www.example.com/foobar</code>就不会匹配到<code>*example.com/</code>这条规则。</p></li><li><p><code>$</code>类似于参数，<code>$1</code>代表着if中第一个<code>*</code>里的字段，以此类推，<code>$2</code>就是第二个<code>*</code>中的字段。例如<code>https://example.com/foobar</code>在上述<code>example.com</code>的规则一里，<code>$1</code>就是「https://」，<code>$2</code>就是「foobar」。</p></li></ul><h1>DNS 解析记录</h1><p>一开始在这里百思不得其解，没有解析记录的域名当然是无法被解析的，访问时找不到IP，当然没法跳转。</p><p>所以我们需要新建<code>www.xiaoming.com</code>、<code>xiaoming.com</code>和<code>www.example.com</code>这三条解析记录，在这里我将解析类型设为 CNAME，值设为了<code>example.com</code>，而CDN保持默认开启状态，否则可能会出现证书问题。至此，我们设定的<code>Page Rules</code>就生效了。</p><h1>参考</h1><ul><li><a href="https://support.cloudflare.com/hc/en-us/articles/200172286-How-do-I-perform-URL-forwarding-or-redirects-with-Cloudflare">How do I perform URL forwarding or redirects with Cloudflare?</a></li><li><a href="https://zh.wikipedia.org/zh-cn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F">正则表达式 - 维基百科，自由的百科全书</a></li><li><a href="https://stackoverflow.com/questions/5163144/what-are-the-special-dollar-sign-shell-variables">What are the special dollar sign shell variables? - Stack Overflow</a></li><li><a href="https://community.cloudflare.com/t/redirecting-www-to-non-www/2949/24">Redirecting www to non www - Getting Started - CloudFlare Community</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;拥有多个域名后的烦恼。&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://echo.moe/hello-world/"/>
    <id>https://echo.moe/hello-world/</id>
    <published>2018-12-21T05:38:44.000Z</published>
    <updated>2022-04-09T08:39:29.076Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><span id="more"></span><h2 id="Quick-Start">Quick Start</h2><h3 id="Create-a-new-post">Create a new post</h3><pre><code class="highlight bash">$ hexo new <span class="string">&quot;My New Post&quot;</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server">Run server</h3><pre><code class="highlight bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files">Generate static files</h3><pre><code class="highlight bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites">Deploy to remote sites</h3><pre><code class="highlight bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
</feed>
