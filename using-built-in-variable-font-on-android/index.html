<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    
    <title>Using Built-in Variable Font on Android - 回音的博客</title>
    <meta charset="utf-8">
    
    <meta name="title" content="Using Built-in Variable Font on Android - 回音的博客">
    <meta name="description" content="">
    <meta property="og:image" content="/favicon.png">
    <meta property="og:image:width" content="200" />
    <meta property="og:image:height" content="200" />
    
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Source Serif Pro', 'Source Han Serif SC', 'Noto Serif CJK SC', 'Noto Serif SC', serif
        }
    </style>
    <link rel="shortcut icon" href="/favicon.png">
    
    <link rel="stylesheet"
        href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/arduino-light.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    
    
<link rel="stylesheet" href="/css/style.css">

    
<script src="/js/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.1"><link rel="alternate" href="/atom.xml" title="回音的博客" type="application/atom+xml">
</head>


<body>
    <header class="header">
    <div class="blog-title">
        <a href="/" class="logo">回音的博客</a>
    </div>
    <nav class="navbar">
        <ul class="menu">
            
            
            
            <li class="menu-item">
                
                <a href="/" class="menu-item-link">主页</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/about" class="menu-item-link">关于</a>
                
            </li>
            
            
            
            <li class="menu-item">
                
                <a href="/atom.xml" class="menu-item-link">订阅</a>
                
            </li>
            
        </ul>
    </nav>
</header>
    <main class="main">
        <article class="post">
    <div class="post-title">
        <h1 class="title">Using Built-in Variable Font on Android</h2>
    </div>
    <div class="post-content">
        <p>You can use variable font for <strong>some writing system</strong> after Android Oreo.</p>
<span id="more"></span>
<p>In Android Oreo, it is the first time that Android support variable font. And Android add <code>NotoSansKhmer-VF.ttf</code> for Khmer language.</p>
<p><a target="_blank" rel="noopener" href="https://cs.android.com/android/platform/superproject/+/android-8.0.0_r1:frameworks/base/data/fonts/fonts.xml;l=214">Line 214 in fonts.xml of Android Oreo</a></p>
<pre><code class="highlight xml"><span class="comment">&lt;!-- ... --&gt;</span>

<span class="tag">&lt;<span class="name">family</span> <span class="attr">lang</span>=<span class="string">&quot;und-Khmr&quot;</span> <span class="attr">variant</span>=<span class="string">&quot;elegant&quot;</span>&gt;</span>
    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;100&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;26.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>
    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;200&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;39.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>
    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;58.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>
    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;400&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;90.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>
    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;500&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;108.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>
    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;600&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;128.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>
    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;700&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;151.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>
    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;800&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;169.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>
    <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;900&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>NotoSansKhmer-VF.ttf
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wdth&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;100.0&quot;</span> /&gt;</span>
        <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;190.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;/<span class="name">font</span>&gt;</span>
<span class="tag">&lt;/<span class="name">family</span>&gt;</span>

<span class="comment">&lt;!-- ... --&gt;</span></code></pre>
<p>Android will use different font in different language automatically. You can directly set <a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/widget/TextView#attr_android:fontVariationSettings">fontVariationSettings</a> for Khmer language.</p>
<h1>How to use variable font?</h1>
<p>In this example, we set width to 25, and weight to 32.</p>
<pre><code class="highlight xml"><span class="tag">&lt;<span class="name">EditText</span></span>
<span class="tag">    &lt;!<span class="attr">--</span> <span class="attr">...</span> <span class="attr">--</span>&gt;</span>
    <span class="comment">&lt;!-- Khmer language as example --&gt;</span>
    android:text=&quot;ភាសាខ្មែរ&quot;
    android:fontVariationSettings=&quot;&#x27;wdth&#x27; 25, &#x27;wght&#x27; 32&quot; /&gt;</code></pre>
<p>You should follow the syntax in <a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/widget/TextView#setFontFeatureSettings(java.lang.String)">Android document</a> to <code>fontVariationSettings</code>.</p>
<p>…and check OpenType document to learn more about axis tags:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/typography/opentype/spec/otvaroverview">OpenType Font Variations overview (OpenType 1.8.4) - Typography | Microsoft Docs</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/typography/opentype/spec/dvaraxisreg">OpenType Design-Variation Axis Tag Registry (OpenType 1.8.4) - Typography | Microsoft Docs</a></li>
</ul>
<h1>Which language have built-in variable font?</h1>
<p>You can directly check <a target="_blank" rel="noopener" href="https://cs.android.com/android/platform/superproject/+/master:frameworks/base/data/fonts/fonts.xml">fonts.xml</a>. Switch branch for different version of Android. Search <code>axis</code>(tags in fonts.xml for variable font) in <code>fonts.xml</code>.</p>
<p>For example, this is a serif (<code>fallbackFor=&quot;serif&quot;</code>) font of Armenian (<code>lang=&quot;und-Armn&quot;</code>) that support variable. At regular weight (<code>weight=&quot;400&quot;</code>) Android will set its ‘wght’ to 400.</p>
<pre><code class="highlight xml"><span class="tag">&lt;<span class="name">family</span> <span class="attr">lang</span>=<span class="string">&quot;und-Armn&quot;</span>&gt;</span>
  <span class="comment">&lt;!-- ... --&gt;</span>

  <span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;400&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span> <span class="attr">fallbackFor</span>=<span class="string">&quot;serif&quot;</span></span>
<span class="tag">        <span class="attr">postScriptName</span>=<span class="string">&quot;NotoSerifEthiopic-Regular&quot;</span>&gt;</span>NotoSerifEthiopic-VF.ttf
      <span class="tag">&lt;<span class="name">axis</span> <span class="attr">tag</span>=<span class="string">&quot;wght&quot;</span> <span class="attr">stylevalue</span>=<span class="string">&quot;400&quot;</span>/&gt;</span>
  <span class="tag">&lt;/<span class="name">font</span>&gt;</span>

  <span class="comment">&lt;!-- ... --&gt;</span>
<span class="tag">&lt;/<span class="name">family</span>&gt;</span></code></pre>
<h2 id="For-English">For English</h2>
<p>Android add variable version of Roboto (default font of English) since Android 12. But for some reason, they use static version in regular weight.</p>
<pre><code class="highlight xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">weight</span>=<span class="string">&quot;400&quot;</span> <span class="attr">style</span>=<span class="string">&quot;normal&quot;</span>&gt;</span>RobotoStatic-Regular.ttf<span class="tag">&lt;/<span class="name">font</span>&gt;</span></code></pre>
<p>You can set <code>textStyle</code> to bold (or any other you want) to use variable version of Roboto. Then you can set any “text style” you like (<code>&quot;'wght' 400&quot;</code> for regular if you wish) by <code>fontVariationSettings</code>.</p>
<pre><code class="highlight xml"><span class="tag">&lt;<span class="name">EditText</span></span>
<span class="tag">    &lt;!<span class="attr">--</span> <span class="attr">...</span> <span class="attr">--</span>&gt;</span>
    android:text=&quot;A quick brown fox jumps over a lazy dog&quot;
    <span class="comment">&lt;!-- or any text style you want --&gt;</span>
    android:textStyle=&quot;bold&quot;
    android:fontVariationSettings=&quot;&#x27;ital&#x27; 0.5, &#x27;wdth&#x27; 85.5, &#x27;wght&#x27; 450&quot; /&gt;</code></pre>
<h2 id="For-CJK-Chinese-Japanese-and-Korean">For CJK (Chinese, Japanese and Korean)</h2>
<p>Unfortunately, Android doesn’t include variable Noto CJK yet. There is a <a target="_blank" rel="noopener" href="https://issuetracker.google.com/issues/186033995">issue</a> to request Google add variable version of Noto CJK into Android. Please <strong>star it</strong> to support the request.</p>
<h1>My app</h1>
<p>I wrote a app that use Android API to set variation. And it allows user to import own fonts to try.</p>
<p><img src="https://github.com/WordlessEcho/Variable-Font-Test/raw/main/doc/pics/variable-font-test-en.gif" alt="App Preview en"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/WordlessEcho/Variable-Font-Test">WordlessEcho/Variable-Font-Test: A simple app to test variable font in system.</a></p>

    </div>
    <div class="post-meta">
        
    <span class="post-time">2021/11/08</span>
    </div>
</article>

<div class="prev_next">
    <nav id="prev_next">

<div class="prev">
    
    <p>上一篇</p>
    <a href="/otc-vf-chws-and-specifi-config-for-android/"><div class="article-nav-title">Android上使用OTC、可变字体、标点挤压和特别修改</div></a>
    
</div>
<div class="next">
    
    <p>下一篇</p>
    <a href="/privacy-policy-of-variable-font-test/"><div class="article-nav-title">Privacy Policy of Variable Font Test</div></a>
    
</div>

</nav>
</div>

<div class="post-comment">
    



</div>

    </main>
    <p class="license"></p>
</body>

</html>
